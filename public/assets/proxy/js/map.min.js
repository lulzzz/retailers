!function(){window.retailers=window.retailers||{};var t=$(".gm-style-iw"),e=t.prev();e.children(":nth-child(2)").css({display:"none"}),e.children(":nth-child(4)").css({display:"none"}),t.parent().parent().css({left:"115px"}),e.children(":nth-child(1)").attr("style",function(t,e){return e+"left: 76px !important;"}),e.children(":nth-child(3)").attr("style",function(t,e){return e+"left: 76px !important;"}),e.children(":nth-child(3)").find("div").children().css({"box-shadow":"rgba(72, 181, 233, 0.6) 0px 1px 6px","z-index":"1"});var o=t.next();o.css({opacity:"1",right:"38px",top:"3px",border:"7px solid #48b5e9","border-radius":"13px","box-shadow":"0 0 5px #3990B9"}),$(".iw-content").height()<140&&$(".iw-bottom-gradient").css({display:"none"}),o.mouseout(function(){$(this).css({opacity:"1"})}),retailers.map=function(t,e,o,s,i,a){if(document.getElementById(t)){var n=new google.maps.Geocoder,r=new google.maps.InfoWindow;new google.maps.DirectionsRenderer;retailers.shop=function(t,e,o,i,d,c){var g=new google.maps.LatLng(t,e);if(l&&l.setMap&&l.setMap(null),n.geocode({location:g},function(o,s){"OK"===s?(p.panTo(g),p.setCenter(g),p.setZoom(15),l=new google.maps.Marker({position:g,map:p}),r.setContent('<div class="info-window"><div class="sticker"><div class="logo"><img src="'+d+'"></div><div class="storefront"><img src="https://maps.googleapis.com/maps/api/streetview?size=600x300&location='+t+","+e+'&heading=151.78&pitch=-0.76&key=AIzaSyAMElu9QAKi3qU68wXQ5yJSCG_YNWVU3do""></div></div></div>'),r.open(p,l),$(".list").show()):window.alert("Geocoder failed due to: "+s)}),"index"==a){if($(".container-fluid").width()<1e3)var m="200px";else var m="250px";var u=[];if(d)var u='<div class="logo"><img src="'+d+'"></div>';else var u='<div class="logo"><h2>'+i+"</h2></div>";var h="http://maps.google.com/maps?q="+t+","+e,v=$('<div class="storefront-sticker" style="max-width:'+m+';"><a href="/a/retailers-1/'+c+"?shop="+s+'"><div class="sticker" data-sticker>'+u+'</a></div><a class="btn btn-secondary btn-sm mt-1 float-xs-right" href="'+h+'" target="_blank"><i class="icon icon-gmap"></i> &nbsp;View in Google Maps</a>');$("div[data-sticker]").remove(),v.appendTo("div[data-map]")}},retailers.json=function(t){qwest.get(t).then(function(t,e){$("#locating").hide(),$(".list").removeClass("disabled"),"index"==a&&(g.clear(),g.add(e),g.sort("distance"));var o=$(".ref-location");retailers.shop(o.closest("li").first().data("latitude"),o.closest("li").first().data("longitude"),o.closest("li").first().data("country_code"),o.closest("li").first().data("name"),o.closest("li").first().data("logo_md"),o.closest("li").first().data("slug")),o.closest("li").first().addClass("active")}).complete(function(){$(".ref-location").on("click",function(){$(".list > li").removeClass("active"),$(this).toggleClass("active"),store.set("retailer_latitude",$(this).data("latitude")),store.set("retailer_longitude",$(this).data("longitude")),retailers.shop($(this).data("latitude"),$(this).data("longitude"),$(this).data("country_code"),$(this).data("name"),$(this).data("logo_md"),$(this).data("slug"))})})};var l,d,c=new Array,p=new google.maps.Map(document.getElementById(t),{styles:styles,zoom:7,mapTypeControl:!1,streetViewControl:!0,center:new google.maps.LatLng(e,o),mapTypeControl:!1,streetViewControl:!0,scrollwheel:!1,mapTypeControl:!0,scaleControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}});for(store.get("latitude")?retailers.json("/a/retailers/"+e+"/"+o+"?shop="+s):navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){store.set("latitude",t.coords.latitude),store.set("longitude",t.coords.longitude),retailers.json("/a/retailers/"+t.coords.latitude+"/"+t.coords.longitude+"?shop="+s)},function(){retailers.json("/a/retailers/"+e+"/"+o+"?shop="+s)}):retailers.json("/a/retailers/"+e+"/"+o+"?shop="+s),d=0;d<i.length;d++)l=new google.maps.Marker({position:new google.maps.LatLng(i[d][0],i[d][1]),map:p,icon:i[d][5]}),c.push(l),google.maps.event.addListener(l,"click",function(t,e){return function(){retailers.shop(i[e][0],i[e][1],i[e][2],i[e][3],i[e][4])}}(l,d));var g=new List("retailers-list",{valueNames:["name","street_number","street_address","city","country","postcode","street_number","distance",{name:"location",data:["latitude","longitude"]},{name:"country_code",data:["country_code"]},{name:"logo_md",data:["logo_md"]},{name:"slug",data:["slug"]}]})}console.log("Retailers Initialized")}}();