window.retailers=window.retailers||{};var geocoding=new google.maps.Geocoder,infowindow=new google.maps.InfoWindow;for(retailers.shop=function(o,a,e,t,s){var i=new google.maps.LatLng(o,a);if(marker&&marker.setMap&&marker.setMap(null),geocoding.geocode({location:i},function(o,a){"OK"===a?(map.panTo(i),map.setCenter(i),map.setZoom(15),marker=new google.maps.Marker({position:i,map:map}),infowindow.setContent("<address><b>"+o[0].address_components[0].long_name+"&nbsp;"+o[0].address_components[1].long_name+"<br>"+o[0].address_components[5].long_name+"<br>"+o[0].address_components[6].long_name+",&nbsp;"+o[0].address_components[4].long_name+"</b></address>"),infowindow.open(map,marker),$(".list").show()):window.alert("Geocoder failed due to: "+a)}),$(".container-fluid").width()<1e3)var n="170px";else var n="250px";var r=$('<div class="storefront-sticker" style="max-width:'+n+';"><div class="storefront-feature" data-sticker><div class="inner"><span class="flag-icon" style="background-image: url('+e+');"></span><div class="logo"><img src="'+s+'"></div></div><div class="tint"><img src="'+t+'" class="bg"></div></div></div>');$("div[data-sticker]").remove(),r.appendTo("div[data-map]")},retailers.json=function(o){qwest.get(o).then(function(o,a){$("#locating").hide(),listings.clear(),listings.add(a),listings.sort("distance"),retailers.shop($(".location").closest("li").first().data("latitude"),$(".location").closest("li").first().data("longitude"),$(".location").closest("li").first().data("country_code"),$(".location").closest("li").first().data("storefront_md"),$(".location").closest("li").first().data("logo_md"))}).complete(function(){$(".location").on("click",function(){retailers.shop($(this).data("latitude"),$(this).data("longitude"),$(this).data("country_code"),$(this).data("storefront_md"),$(this).data("logo_md"))})})},i=0;i<locations.length;i++)marker=new google.maps.Marker({position:new google.maps.LatLng(locations[i][0],locations[i][1]),map:map,icon:locations[i][5]}),markers.push(marker),google.maps.event.addListener(marker,"click",function(o,a){return function(){retailers.shop(locations[a][0],locations[a][1],locations[a][2],locations[a][3],locations[a][4])}}(marker,i));