window.retailers=window.retailers||{};var geocoding=new google.maps.Geocoder,infowindow=new google.maps.InfoWindow;for(retailers.shop=function(o,t,s,a,e){var n=new google.maps.LatLng(o,t);if(marker&&marker.setMap&&marker.setMap(null),geocoding.geocode({location:n},function(o,t){"OK"===t?(map.panTo(n),map.setCenter(n),map.setZoom(15),marker=new google.maps.Marker({position:n,map:map}),infowindow.setContent("<address><b>"+o[0].address_components[0].long_name+"&nbsp;"+o[0].address_components[1].long_name+"<br>"+o[0].address_components[5].long_name+"<br>"+o[0].address_components[6].long_name+",&nbsp;"+o[0].address_components[4].long_name+"</b></address>"),infowindow.open(map,marker),$(".list").show()):window.alert("Geocoder failed due to: "+t)}),$(".container-fluid").width()<1e3)var i="170px";else var i="250px";var l=$('<div class="storefront-sticker" style="max-width:'+i+';"><div class="storefront-feature" data-sticker><div class="inner"><span class="flag-icon" style="background-image: url('+s+');"></span><div class="logo"><img src="'+e+'"></div></div><div class="tint"><img src="'+a+'" class="bg"></div></div><div class="row pt-1"><div class="col-xs-12 col-sm-12 col-md-6 pr-0"><button class="btn btn-secondary btn-sm pull-left" type="button">Find Directions</button></div><div class="col-xs-12 col-sm-12 col-md-6"><a class="btn btn-secondary btn-sm pull-right" href="#">View Retailer</button></div></div></div>');$("div[data-sticker]").remove(),l.appendTo("div[data-map]")},retailers.json=function(o){qwest.get(o).then(function(o,t){$("#locating").hide(),listings.clear(),listings.add(t),listings.sort("distance"),retailers.shop($(".location").closest("li").first().data("latitude"),$(".location").closest("li").first().data("longitude"),$(".location").closest("li").first().data("country_code"),$(".location").closest("li").first().data("storefront_md"),$(".location").closest("li").first().data("logo_md"))}).complete(function(){$(".location").on("click",function(){retailers.shop($(this).data("latitude"),$(this).data("longitude"),$(this).data("country_code"),$(this).data("storefront_md"),$(this).data("logo_md"))})})},i=0;i<locations.length;i++)marker=new google.maps.Marker({position:new google.maps.LatLng(locations[i][0],locations[i][1]),map:map,icon:locations[i][5]}),markers.push(marker),google.maps.event.addListener(marker,"click",function(o,t){return function(){retailers.shop(locations[t][0],locations[t][1],locations[t][2],locations[t][3],locations[t][4])}}(marker,i));